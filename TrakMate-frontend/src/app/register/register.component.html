<app-nav-bar></app-nav-bar>

<section class="auth">
  <div class="auth-card">
    <h1 class="auth-title">Ãnregistrare</h1>
    <p class="auth-subtitle">
      CreeazÄƒ-È›i cont pe Track<span class="accent">Mate</span>
    </p>

    <form
      class="auth-form"
      autocomplete="on"
      (ngSubmit)="onSubmit()"
      #registerForm="ngForm"
    >
      <!-- IMAGINE PROFIL - MutatÄƒ sus cu preview -->
      <div class="profile-image-upload">
        <div class="image-preview-container">
          <img 
            [src]="imagePreview || 'assets/default-avatar.png'" 
            alt="Profile preview"
            class="preview-image"
            (error)="handleImageError($event)"
          />
          <button 
            type="button" 
            class="remove-image-btn" 
            *ngIf="imagePreview"
            (click)="removeImage()"
            title="È˜terge imagine"
          >
            âœ•
          </button>
        </div>
        
        <label class="upload-btn">
          <input
            type="file"
            name="avatar"
            accept="image/png,image/jpeg,image/jpg,image/gif,image/webp"
            (change)="onFileSelected($event)"
            style="display: none;"
          />
          <span>{{ imagePreview ? 'ğŸ“· SchimbÄƒ imaginea' : 'ğŸ“· AdaugÄƒ imagine' }}</span>
        </label>
        <small class="field__hint">PNG/JPG, max 5MB (opÈ›ional)</small>
      </div>

      <!-- EMAIL -->
      <label class="field">
        <span class="field__label">Email *</span>
        <input
          class="field__input"
          type="email"
          name="email"
          [(ngModel)]="email"
          placeholder="ex: lando@norris.test"
          required
        />
      </label>

      <!-- PAROLÄ‚ -->
      <label class="field">
        <span class="field__label">ParolÄƒ *</span>
        <input
          class="field__input"
          type="password"
          name="password"
          [(ngModel)]="password"
          placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"
          required
        />
      </label>

      <!-- PRENUME -->
      <label class="field">
        <span class="field__label">Prenume *</span>
        <input
          class="field__input"
          type="text"
          name="firstName"
          [(ngModel)]="firstName"
          placeholder="ex: Lando"
          required
        />
      </label>

      <!-- NUME -->
      <label class="field">
        <span class="field__label">Nume *</span>
        <input
          class="field__input"
          type="text"
          name="lastName"
          [(ngModel)]="lastName"
          placeholder="ex: Norris"
          required
        />
      </label>

      <!-- EROARE -->
      <p class="auth-error" *ngIf="error">{{ error }}</p>

      <!-- ACTIONS -->
      <div class="actions">
        <button type="submit" class="btn btn--white" [disabled]="loading">
          {{ loading ? 'Se creeazÄƒ contul...' : 'CreeazÄƒ cont' }}
        </button>
        <button type="button" class="btn btn--ghost" (click)="changeToLogin()">
          Am deja cont
        </button>
      </div>
    </form>
  </div>
</section>

<app-footer></app-footer>